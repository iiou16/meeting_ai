# 実装TODOリスト

> 各ステップの実装時には必ずユニットテストを作成・更新し、既存機能への影響を確認すること。

## フェーズ0: 準備

- [ ] OpenAI APIキー・利用制限の確認、環境変数定義 (`OPENAI_API_KEY` 等)。
- [x] FFmpegのセットアップ (ローカル開発用バイナリ確認、Dockerイメージに追加)。
- [x] フロントエンド雛形作成（`frontend/` 配下で Next.js + TypeScript + ESLint/Prettier）。
- [x] バックエンド雛形作成（`backend/` 配下で FastAPI プロジェクト、`uv` による仮想環境/依存管理）。
- [ ] インフラ・データベース接続設定（PostgreSQL/RedisのDocker Compose定義、サービス間通信のネットワーク設計）。

## フェーズ1: バックエンド基盤

- [x] 動画アップロードAPI (`POST /api/videos`) の実装（FastAPI、multipart対応、S3互換ストレージ保存）。
- [x] `uv` スクリプトでバックエンドの起動/テストコマンドを整備。
- [x] ジョブキュー設定（Redis + RQ/CeleryなどPython向けキュー）とワーカーの雛形作成。
- [x] 動画→音声抽出処理（FFmpeg呼び出し）をワーカーで実装。
- [x] 音声チャンク分割とメタデータ管理（`MediaAsset` レコード作成）。
- [x] GPT-4o Transcribe API呼び出し実装（チャンクごとの再試行、レート制御）。
- [x] 文字起こし結果のマージと`TranscriptSegment`への保存。
  - [x] マージユーティリティと永続化ヘルパーの実装。
  - [x] ワーカー処理へ組み込み、生成物を`TranscriptSegment`として保存。

## フェーズ2: 要約・データ整形

- [ ] 文字起こしから要約プロンプトを生成するロジック設計（Pythonサービスとして実装）。
- [ ] GPT-4oによるタイムスタンプ付き要約実装（セクション分割と`SummaryItem`保存）。
- [ ] アクションアイテム抽出プロンプトとデータモデルへの保存。
- [ ] 要約/アクションアイテムの品質評価指標定義（テストデータで検証）。

## フェーズ3: フロントエンド

- [ ] アップロード画面（プログレス表示、サイズ検証）。
- [ ] バックエンドAPIクライアント実装（OpenAPIコード生成または手動型定義共有）。
- [ ] ジョブ進捗ダッシュボード（Polling or WebSocket）。
- [ ] 議事録閲覧画面（全文文字起こし、タイムスタンプリンク、検索フィルタ）。
- [ ] 要約ハイライト表示、アクションアイテムリスト、エクスポートボタン。
- [ ] UIアクセシビリティチェック、i18n対応（日本語/英語）。

## フェーズ4: エクスポート・通知

- [ ] JSON/Markdown/CSV出力エンドポイントの実装とUI連携。
- [ ] メール/Slack通知連携で処理完了通知を送信。
- [ ] データ削除API (`DELETE /api/meetings/{id}`) とUI。
- [ ] ライフサイクル管理（保存期限経過データの自動削除ジョブ）。

## フェーズ5: 運用・品質

- [ ] ロギング・モニタリング (OpenTelemetry + Grafana/Papertrail等)。
- [ ] エラー検知・再試行ポリシーの実装とテスト。
- [ ] E2Eテスト（Cypress/Playwright）と負荷テストシナリオ作成。
- [ ] セキュリティレビュー（API認証、RBAC、データ暗号化）。
- [ ] ドキュメント整備（開発手順書、運用Runbook）。

## オープンクエスチョン

- [ ] 話者識別(ダイアライゼーション)をどこまで行うか。
- [ ] 要約品質評価に人手レビューを組み込むか。
- [ ] 料金プランやユーザー課金設計の要否。
- [ ] 外部連携（Google Drive, Zoom, Teams録画）の優先度。
